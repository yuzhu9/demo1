<!doctype html>
<html lang="zh-Hans">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="style.css">
    <title>Document</title>
</head>
<body>
<section class="profile">
    <img src="http://opdzp4hj6.bkt.clouddn.com/image/demo/102.png" alt="">
    <div class="tags">
        <span>汉服</span>
        <span>汉族民族服饰</span>
        <span>汉衣冠</span>
        <span>华夏衣冠</span>
    </div>
</section>
<section class="summary">
    <h2 class="status1">
        <span>汉服部分形制Q版图集</span>
    </h2>
    <h2 class="status2"><span>汉服部分形制</span><span>Q版图集</span></h2>
    <p><span>有服章之美谓之华，有礼仪之大谓之夏</span></p>
    <p><span>汉服的基本特征:交领右衽、上衣下裳、系带暗扣...</span></p>
</section>
<section class="album">

    <ul id="list">
        <li>
            <img src="http://opdzp4hj6.bkt.clouddn.com/image/demo/e5523812b31bb0513c767c8f367adab44bede0e9.jpg" alt="">
            <h3><span>褙子</span></h3>
            <p><span>汉服的一种,对襟,两侧从腋下起不缝合,多罩在其他衣服外面穿着。在宋、明朝时最为盛行。</span></p>
        </li>
        <li>
            <img src="http://opdzp4hj6.bkt.clouddn.com/image/demo/7600362ac65c1038b5202355b0119313b17e8998.jpg" alt="">
            <h3><span>对襟襦裙</span></h3>
            <p>是典型的“上衣下裳”衣制，对襟襦裙为襦裙的一类，其上襦为直领，衣襟呈对称状，故称对襟襦裙。</p>
        </li>
        <li>
            <img src="http://opdzp4hj6.bkt.clouddn.com/image/demo/9c1f7bf0f736afc30470d2f2b119ebc4b64512fd.jpg" alt="">
            <h3><span>袄裙</span></h3>
            <p>早期汉服上衣多称为“襦”，魏晋以后多用“袄”、“衫”，唐以后“襦”字逐渐被“袄”、“衫”替代。</p>
        </li>
        <li>
            <img src="http://opdzp4hj6.bkt.clouddn.com/image/demo/20131027144553_zLjHK.jpeg" alt="">
            <h3><span>道袍</span></h3>
            <p>道袍在汉服体系中指汉服的一个款式，并非道士袍。是明代士人常服，应用于各种日常场合。</p>
        </li>
        <li>
            <img src="http://opdzp4hj6.bkt.clouddn.com/image/demo/002.jpeg" alt="">
            <h3><span>朱子深衣</span></h3>
            <p>朱子深衣，汉服中深衣的一种，朱子深衣的结构特点为：直领而穿为交领，下身有裳十二幅，裳幅皆梯形。</p>
        </li>
        <li>
            <img src="http://opdzp4hj6.bkt.clouddn.com/image/demo/101.png" alt="">
            <h3><span>襕衫</span></h3>
            <p>中国汉民族传统服饰之一，始现于唐，兴于宋明，因其于衫下施横襕为裳，故称：“襕衫”。</p>
        </li>
        <li>
            <img src="http://opdzp4hj6.bkt.clouddn.com/image/demo/4ff20ff431adcbef8e419391aeaf2edda2cc9f85.jpg" alt="">
            <h3><span>曲裾</span></h3>
            <p>可以直观理解为一种续衽绕襟的服装。曲裾袍是深衣的一种，后片衣襟接长，加长后的衣襟形成三角。</p>
        </li>
        <li>
            <img src="http://opdzp4hj6.bkt.clouddn.com/image/demo/003.jpeg" alt="">
            <h3><span>圆领袍</span></h3>
            <p>圆领袍，至少在汉朝初年就出现的一种汉族服饰。圆领袍的领型分为四种，无领，微立领，宽领，立领。</p>
        </li>
        <li>
            <img src="http://opdzp4hj6.bkt.clouddn.com/image/demo/004.jpeg" alt="">
            <h3><span>裋褐</span></h3>
            <p>裋褐为上衣下裤的形制，上衣为交领衣，长度一般在臀部，裤为直筒裤。男女皆可穿。</p>
        </li>
    </ul>
    <div class="loadmore">
        <button class="loadMoreButton" id="loadMoreButton">加载更多</button>
    </div>
</section>
</body>
<script>
    let list = document.querySelector('#list')
    let n = 1
    let onOff = true
    function loadMore() {
        if (onOff) {
            let request = new XMLHttpRequest()
            request.open('GET', `./page-${n}`)
            request.onload = function () {
                n += 1
                let response = request.responseText
                let data = window.JSON.parse(response)
                for (var i = 0; i < data.content.length; i++) {
                    let listString =
                        `<li>
                            <img src="${data.content[i].url}">
                            <h3><span>${data.content[i].name}</span></h3>
                            <p>${data.content[i].describe}</p>
                        </li>`
                    list.insertAdjacentHTML('beforeend', listString);
                }
                if (data.hasMorePages === false) {
                    loadMoreButton.disabled = true
                    loadMoreButton.textContent = '本次展示已结束，感谢观看 (●′ω`●) '
                    onOff = false
                }
            }
            request.send()
        }
    }
    loadMoreButton.onclick = loadMore

    window.onscroll = function () {
        let doc = document.documentElement
        let height = doc.clientHeight
        let viewportOffset = loadMoreButton.getBoundingClientRect()
        let buttonTop = viewportOffset.top
        if (buttonTop < height - 55) {
            loadMore()
        }
    }
</script>
</html>